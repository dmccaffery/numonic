#! /usr/bin/env sh

__numonic_source_os() {

	for current in $(reverse "$(print-unames)"); do
		uname_path="${NUMONIC_HOME}/sh/scripts/${current}"

		if [ ! -d "${uname_path}" ]; then
			continue
		fi

		export NUMONIC_OS="${current}"
		export PATH="${uname_path}:${PATH}"

		if [ -d "${uname_path}/eval" ]; then
			for eval_script in "${uname_path}"/eval/*; do

				if [ ! -f "${eval_script}" ]; then
					break
				fi

				 eval "$(cat "${eval_script}")"
			done
		fi
	done
}

__numonic_source_os
